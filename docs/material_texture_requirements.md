# Требования к моделям, материалам и текстурам

Документ фиксирует минимальные правила, чтобы назначение материалов было детерминированным, а валидация под пайплайны работала без ложных `ready`.

## 1. Геометрия и материалы

1. Модель должна хранить назначение материала на полигонах (FBX `LayerElementMaterial`: `ByPolygon` или `AllSame`).
2. Каждый полигон должен иметь валидный индекс материала (`>= 0`) или явный fallback-материал.
3. Имена материалов в одной модели должны быть уникальными.
4. Материал не должен использоваться как "сборный" для разных логических поверхностей с разными наборами карт.

## 2. Имена и наборы текстур

1. Набор карт для одного материала должен иметь общий префикс:
   `wood1_dif`, `wood1_met`, `wood1_rough`, `wood1_nml`.
2. Для разных материалов префиксы должны отличаться:
   `wood1_*` и `window_*`, а не смешанный `material_*`.
3. Рекомендуемые суффиксы каналов:
   - BaseColor: `dif`, `diff`, `diffuse`, `albedo`, `basecolor`
   - Metal: `met`, `metal`, `metallic`
   - Roughness: `rough`, `rgh`, `roughness`
   - Normal: `nml`, `nrm`, `normal`
4. Не использовать неоднозначные имена без каналов (например, `tex_01.png`).

## 3. Путь и формат файлов

1. Текстуры должны быть доступны по относительным/корректным путям после переноса проекта.
2. Допустимые форматы и лимиты берутся из `docs/profiles.yaml`.
3. Для production-проверок имена файлов должны соответствовать regex из `docs/profiles.yaml` (`validation.naming.*`).

## 4. Правила для multi-material моделей

1. В UI назначение карт делается по выбранному материалу (`Material`), а не только глобально.
2. Глобальный override допустим только как осознанный режим предпросмотра.
3. Валидация пайплайна считается по каждому материалу: если хотя бы один материал не закрывает обязательные каналы, пайплайн не `ready`.

## 5. Минимальный чек перед импортом

1. Проверить, что у каждого материала есть свой набор (минимум `basecolor`).
2. Проверить, что имена наборов не пересекаются между материалами.
3. Проверить, что в DCC (Houdini/Maya/Blender) полигоны действительно сидят на ожидаемых материалах.
4. Проверить, что после экспорта FBX имена материалов и число материалов не изменились.
